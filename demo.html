<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reduced Accordion UI</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <!-- ðŸ”¹ Added for drag -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>

  <style>
    .card-rounded {
      border-radius: 10px;
    }
    .card-shadow {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .bg-light-gray {
      background-color: #f8f9fa;
    }
    .bg-light-primary-shade {
      background-color: #e9ecef;
    }
    .accordion-header-uniform {
      padding: 1rem;
      background-color: #fff;
      border-bottom: 1px solid #dee2e6;
      cursor: grab; /* ðŸ”¹ Added for drag handle look */
      user-select: none; /* ðŸ”¹ Added for drag handle */
    }
    .accordion-header-uniform:active {
      cursor: grabbing; /* ðŸ”¹ Added for drag handle */
    }
    .btn-action {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .nav-tab-btn {
      font-size: 0.875rem;
      padding: 0.5rem 1rem;
      color: #212529;
      border: none;
      background: none;
    }
    .nav-tab-btn.active {
      color: #0d6efd;
      border-bottom: 2px solid #0d6efd;
    }
    .position-sickyt-col-4 {
      position: sticky;
      top: 0;
    }
    .component-card {
      padding: 1.5rem;
    }
    .accordion-body {
      padding: 1.5rem;
    }

    /* ðŸ”¹ Added for drag animation effect */
    .sortable-chosen {
      transform: scale(1.02);
      transition: transform 0.2s ease;
    }
    .sortable-ghost {
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <section class="p-3 pt-0">
    <div class="container-fluid" bis_skin_checked="1">
      <div class="row justify-content-center" bis_skin_checked="1">
        <!-- Left Section -->
        <div class="col-xl-8 col-lg-8 mb-4 mb-lg-0 bg-light-gray" bis_skin_checked="1">

          <!-- ðŸ”¹ Add draggable container id -->
          <div id="leftAccordionGroup"> <!-- ðŸ”¹ Added for drag -->

            <div class="accordion card-rounded card-shadow bg-white overflow-hidden mb-3" id="accordionExample" bis_skin_checked="1">
              <div class="accordion-item border-0" bis_skin_checked="1">
                <h2 class="accordion-header">
                  <div class="d-flex align-items-center justify-content-between accordion-header-uniform" bis_skin_checked="1">
                    <button class="btn p-0 text-dark fw-bold fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      <i class="bi bi-person me-3 text-primary"></i>
                      Contact &amp; Property Overview
                    </button>
                    <div class="d-flex align-items-center" bis_skin_checked="1">
                      <button class="btn btn-sm btn-action me-2 rounded-circle bg-light-primary-shade" title="Edit Contact">
                        <i class="bi bi-pencil-square text-muted"></i>
                      </button>
                      <button class="btn btn-sm btn-action rounded-circle bg-light-primary-shade" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" id="chevron-btn-contact">
                        <i class="bi bi-chevron-up text-muted"></i>
                      </button>
                    </div>
                  </div>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample" bis_skin_checked="1">
                  <div class="accordion-body p-4 p-lg-5" bis_skin_checked="1"></div>
                </div>
              </div>
            </div>

            <div class="row justify-content-center" bis_skin_checked="1">
              <div class="col-md-4 mb-3 mt-3 px-2" bis_skin_checked="1">
                <div class="accordion-item bg-white card-rounded card-shadow" bis_skin_checked="1">
                  <h2 class="mb-0">
                    <div class="d-flex align-items-center justify-content-between accordion-header-uniform" bis_skin_checked="1">
                      <button class="btn p-0 text-dark fw-bold fs-5 collapsed text-start" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        <i class="bi bi-headset me-3 text-primary"></i>
                        Call Controls
                      </button>
                      <div class="d-flex align-items-center" id="historyTab" role="tablist" bis_skin_checked="1">
                        <button class="btn btn-sm btn-action rounded-circle bg-light-primary-shade collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" id="chevron-btn-contact">
                          <i class="bi bi-chevron-up text-muted"></i>
                        </button>
                      </div>
                    </div>
                  </h2>
                  <div id="collapseTwo" class="accordion-collapse collapse show" data-bs-parent="#accordionExample" bis_skin_checked="1">
                    <div class="accordion-body" bis_skin_checked="1"></div>
                  </div>
                </div>
              </div>

              <div class="col-md-8 mb-3 mt-3 px-2" bis_skin_checked="1">
                <div class="accordion card-rounded card-shadow bg-white overflow-hidden mb-3" id="accordionExample" bis_skin_checked="1">
                  <div class="accordion-item border-0" bis_skin_checked="1">
                    <h2 class="mb-0">
                      <div class="d-flex align-items-center justify-content-between accordion-header-uniform" bis_skin_checked="1">
                        <button class="btn p-0 text-dark fw-bold fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="true" aria-controls="collapseEight">
                          <i class="bi bi-envelope me-2 text-primary"></i>
                          Phone &amp; Email History
                        </button>
                        <div class="d-flex align-items-center" id="historyTab" role="tablist" bis_skin_checked="1">
                          <button class="btn nav-tab-btn me-2 active" id="phone-tab" data-bs-toggle="tab" data-bs-target="#phone" type="button" role="tab" aria-controls="phone" aria-selected="true">Phone</button>
                          <button class="btn nav-tab-btn me-2" id="email-tab" data-bs-toggle="tab" data-bs-target="#email" type="button" role="tab" aria-controls="email" aria-selected="false" tabindex="-1">Email</button>
                          <button class="btn btn-sm btn-action rounded-circle bg-light-primary-shade" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="true" aria-controls="collapseEight" id="chevron-btn-contact">
                            <i class="bi bi-chevron-up text-muted"></i>
                          </button>
                        </div>
                      </div>
                    </h2>
                    <div id="collapseEight" class="accordion-collapse collapse show" bis_skin_checked="1">
                      <div class="tab-content pt-0 mt-0" id="historyTabContent" bis_skin_checked="1">
                        <div class="tab-pane fade show active" id="phone" role="tabpanel" aria-labelledby="phone-tab" bis_skin_checked="1"></div>
                        <div class="tab-pane fade" id="email" role="tabpanel" aria-labelledby="email-tab" bis_skin_checked="1"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="accordion card-rounded card-shadow bg-white overflow-hidden" id="accordionExample" bis_skin_checked="1">
                  <div class="accordion-item border-0" bis_skin_checked="1">
                    <h2 class="mb-0">
                      <div class="d-flex align-items-center justify-content-between accordion-header-uniform" bis_skin_checked="1">
                        <button class="btn p-0 text-dark fw-bold fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapsesix" aria-expanded="true" aria-controls="collapsesix">
                          <i class="bi bi-list me-2 text-primary"></i>
                          History
                        </button>
                        <div class="d-flex align-items-center" id="historyTab" role="tablist" bis_skin_checked="1">
                          <button class="btn nav-tab-btn me-2 active" id="call-tab" data-bs-toggle="tab" data-bs-target="#call" type="button" role="tab" aria-controls="call" aria-selected="true">Call</button>
                          <button class="btn nav-tab-btn me-2" id="status-tab" data-bs-toggle="tab" data-bs-target="#status" type="button" role="tab" aria-controls="status" aria-selected="false" tabindex="-1">Status</button>
                          <button class="btn nav-tab-btn me-2" id="disposition-Tab" data-bs-toggle="tab" data-bs-target="#disposition" type="button" role="tab" aria-controls="disposition" aria-selected="false" tabindex="-1">Disposition</button>
                          <button class="btn btn-sm btn-action rounded-circle bg-light-primary-shade" type="button" data-bs-toggle="collapse" data-bs-target="#collapsesix" aria-expanded="true" aria-controls="collapsesix" id="chevron-btn-contact">
                            <i class="bi bi-chevron-up text-muted"></i>
                          </button>
                        </div>
                      </div>
                    </h2>
                    <div id="collapsesix" class="accordion-collapse collapse show" bis_skin_checked="1">
                      <div class="tab-content pt-0 mt-0" id="historyTabContent" bis_skin_checked="1">
                        <div class="tab-pane fade show active" id="call" role="tabpanel" aria-labelledby="call-tab" bis_skin_checked="1"></div>
                        <div class="tab-pane fade" id="status" role="tabpanel" aria-labelledby="status-tab" bis_skin_checked="1"></div>
                        <div class="tab-pane fade" id="disposition" role="tabpanel" aria-labelledby="disposition-tab" bis_skin_checked="1"></div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div> <!-- /#leftAccordionGroup -->
        </div>

        <!-- Right Section -->
        <div class="col-xl-4 col-lg-4 position-sticky end-0 top-0 position-sickyt-col-4 px-2 bg-light-gray" style="height: 100vh; overflow-y: auto;" bis_skin_checked="1">

          <!-- ðŸ”¹ Add draggable container id -->
          <div id="rightAccordionGroup"> <!-- ðŸ”¹ Added for drag -->

            <div class="accordion card-rounded card-shadow bg-white overflow-hidden mb-3" id="accordionScript" bis_skin_checked="1">
              <div class="accordion-item border-0" bis_skin_checked="1">
                <h2 class="accordion-header">
                  <div class="d-flex align-items-center justify-content-between accordion-header-uniform" bis_skin_checked="1">
                    <button class="btn p-0 text-dark fw-bold fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapsesevern" aria-expanded="true" aria-controls="collapsesevern">
                      <i class="bi bi-chat-text me-3 text-primary"></i>
                      Script
                    </button>
                    <div class="d-flex align-items-center" bis_skin_checked="1">
                      <button class="btn btn-sm btn-action me-2 rounded-circle bg-light-primary-shade" title="Swap Script">
                        <i class="bi bi-arrow-down-up text-muted"></i>
                      </button>
                      <button class="btn btn-sm btn-action rounded-circle bg-light-primary-shade" type="button" data-bs-toggle="collapse" data-bs-target="#collapsesevern" aria-expanded="true" aria-controls="collapsesevern" id="chevron-btn-script">
                        <i class="bi bi-chevron-up text-muted"></i>
                      </button>
                    </div>
                  </div>
                </h2>
                <div id="collapsesevern" class="accordion-collapse collapse show" data-bs-parent="#accordionScript" bis_skin_checked="1">
                  <div class="accordion-body p-4 component-card" bis_skin_checked="1"></div>
                </div>
              </div>
            </div>

            <div class="accordion card-rounded card-shadow bg-white overflow-hidden mb-3" id="accordionNewComponent" bis_skin_checked="1">
              <div class="accordion-item border-0" bis_skin_checked="1">
                <h2 class="accordion-header">
                  <div class="d-flex align-items-center justify-content-between accordion-header-uniform" bis_skin_checked="1">
                    <button class="btn p-0 text-dark fw-bold fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                      <i class="bi bi-people text-primary me-2"></i>
                      Interactions
                    </button>
                    <div class="d-flex align-items-center" bis_skin_checked="1">
                      <button class="btn btn-sm btn-action me-2 rounded-circle bg-light-primary-shade" title="Swap Script">
                        <i class="bi bi-arrow-down-up text-muted"></i>
                      </button>
                      <button class="btn btn-sm btn-action rounded-circle bg-light-primary-shade" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree" id="chevron-btn-script">
                        <i class="bi bi-chevron-up text-muted"></i>
                      </button>
                    </div>
                  </div>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#accordionNewComponent" bis_skin_checked="1">
                  <div class="accordion-body p-0" bis_skin_checked="1"></div>
                </div>
              </div>
            </div>

          </div> <!-- /#rightAccordionGroup -->
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap JS and Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>

  <script>
    // Initialize Bootstrap tooltips
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

    // Ensure accordion chevron icons toggle
    document.querySelectorAll('.accordion-button').forEach(button => {
      button.addEventListener('click', () => {
        const chevron = button.parentElement.querySelector('.bi-chevron-up, .bi-chevron-down');
        if (chevron) {
          chevron.classList.toggle('bi-chevron-up');
          chevron.classList.toggle('bi-chevron-down');
        }
      });
    });

    // ðŸ”¹ Added for drag (initialize SortableJS)
    new Sortable(document.getElementById('leftAccordionGroup'), {
      animation: 200,
      handle: '.accordion-header-uniform',
      ghostClass: 'sortable-ghost',
      chosenClass: 'sortable-chosen',
      direction: 'vertical',
      swapThreshold: 0.65,
    });

    new Sortable(document.getElementById('rightAccordionGroup'), {
      animation: 200,
      handle: '.accordion-header-uniform',
      ghostClass: 'sortable-ghost',
      chosenClass: 'sortable-chosen',
      direction: 'vertical',
      swapThreshold: 0.65,
    });
  </script>
</body>
</html>
